{"version":3,"sources":["pnotify.nonblock.js"],"names":["root","factory","define","amd","exports","module","require","jQuery","PNotify","window","$","re_on","re_mouse_events","re_ui_events","re_html_events","dom_event","e","orig_e","event_object","toLowerCase","document","createEvent","dispatchEvent","replace","match","offset","initMouseEvent","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","initUIEvent","initEvent","createEventObject","fireEvent","nonblock_last_elem","nonblock_pass","notice","e_name","elem","addClass","element_below","elementFromPoint","removeClass","jelement_below","cursor_style","css","tagName","get","call","originalEvent","prototype","options","nonblock","modules","init","that","on","stopPropagation","animating","preventDefault"],"mappings":"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","file":"src/pnotify.nonblock.js","sourceRoot":"../","sourcesContent":["// Nonblock\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as a module.\n    define('pnotify.nonblock', ['jquery', 'pnotify'], factory);\n  } else if (typeof exports === 'object' && typeof module !== 'undefined') {\n    // CommonJS\n    module.exports = factory(require('jquery'), require('./pnotify'));\n  } else {\n    // Browser globals\n    factory(root.jQuery, root.PNotify);\n  }\n}(typeof window !== \"undefined\" ? window : this, function($, PNotify){\n  // Some useful regexes.\n  var re_on = /^on/,\n      re_mouse_events = /^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/,\n      re_ui_events = /^(focus|blur|select|change|reset)$|^key(press|down|up)$/,\n      re_html_events = /^(scroll|resize|(un)?load|abort|error)$/;\n  // Fire a DOM event.\n  var dom_event = function(e, orig_e){\n    var event_object;\n    e = e.toLowerCase();\n    if (document.createEvent && this.dispatchEvent) {\n      // FireFox, Opera, Safari, Chrome\n      e = e.replace(re_on, '');\n      if (e.match(re_mouse_events)) {\n        // This allows the click event to fire on the notice. There is\n        // probably a much better way to do it.\n        $(this).offset();\n        event_object = document.createEvent(\"MouseEvents\");\n        event_object.initMouseEvent(\n          e, orig_e.bubbles, orig_e.cancelable, orig_e.view, orig_e.detail,\n          orig_e.screenX, orig_e.screenY, orig_e.clientX, orig_e.clientY,\n          orig_e.ctrlKey, orig_e.altKey, orig_e.shiftKey, orig_e.metaKey, orig_e.button, orig_e.relatedTarget\n        );\n      } else if (e.match(re_ui_events)) {\n        event_object = document.createEvent(\"UIEvents\");\n        event_object.initUIEvent(e, orig_e.bubbles, orig_e.cancelable, orig_e.view, orig_e.detail);\n      } else if (e.match(re_html_events)) {\n        event_object = document.createEvent(\"HTMLEvents\");\n        event_object.initEvent(e, orig_e.bubbles, orig_e.cancelable);\n      }\n      if (!event_object) return;\n      this.dispatchEvent(event_object);\n    } else {\n      // Internet Explorer\n      if (!e.match(re_on)) e = \"on\"+e;\n      event_object = document.createEventObject(orig_e);\n      this.fireEvent(e, event_object);\n    }\n  };\n\n\n  // This keeps track of the last element the mouse was over, so\n  // mouseleave, mouseenter, etc can be called.\n  var nonblock_last_elem;\n  // This is used to pass events through the notice if it is non-blocking.\n  var nonblock_pass = function(notice, e, e_name){\n    notice.elem.addClass(\"ui-pnotify-nonblock-hide\");\n    var element_below = document.elementFromPoint(e.clientX, e.clientY);\n    notice.elem.removeClass(\"ui-pnotify-nonblock-hide\");\n    var jelement_below = $(element_below);\n    var cursor_style = jelement_below.css(\"cursor\");\n    if (cursor_style === \"auto\" && element_below.tagName === \"A\") {\n      cursor_style = \"pointer\";\n    }\n    notice.elem.css(\"cursor\", cursor_style !== \"auto\" ? cursor_style : \"default\");\n    // If the element changed, call mouseenter, mouseleave, etc.\n    if (!nonblock_last_elem || nonblock_last_elem.get(0) != element_below) {\n      if (nonblock_last_elem) {\n        dom_event.call(nonblock_last_elem.get(0), \"mouseleave\", e.originalEvent);\n        dom_event.call(nonblock_last_elem.get(0), \"mouseout\", e.originalEvent);\n      }\n      dom_event.call(element_below, \"mouseenter\", e.originalEvent);\n      dom_event.call(element_below, \"mouseover\", e.originalEvent);\n    }\n    dom_event.call(element_below, e_name, e.originalEvent);\n    // Remember the latest element the mouse was over.\n    nonblock_last_elem = jelement_below;\n  };\n\n\n  PNotify.prototype.options.nonblock = {\n    // Create a non-blocking notice. It lets the user click elements underneath it.\n    nonblock: false\n  };\n  PNotify.prototype.modules.nonblock = {\n    init: function(notice, options){\n      var that = this;\n      notice.elem.on({\n        \"mouseenter\": function(e){\n          if (that.options.nonblock) {\n            e.stopPropagation();\n          }\n          if (that.options.nonblock) {\n            // If it's non-blocking, animate to the other opacity.\n            notice.elem.addClass(\"ui-pnotify-nonblock-fade\");\n          }\n        },\n        \"mouseleave\": function(e){\n          if (that.options.nonblock) {\n            e.stopPropagation();\n          }\n          nonblock_last_elem = null;\n          notice.elem.css(\"cursor\", \"auto\");\n          // Animate back to the normal opacity.\n          if (that.options.nonblock && notice.animating !== \"out\") {\n            notice.elem.removeClass(\"ui-pnotify-nonblock-fade\");\n          }\n        },\n        \"mouseover\": function(e){\n          if (that.options.nonblock) {\n            e.stopPropagation();\n          }\n        },\n        \"mouseout\": function(e){\n          if (that.options.nonblock) {\n            e.stopPropagation();\n          }\n        },\n        \"mousemove\": function(e){\n          if (that.options.nonblock) {\n            e.stopPropagation();\n            nonblock_pass(notice, e, \"onmousemove\");\n          }\n        },\n        \"mousedown\": function(e){\n          if (that.options.nonblock) {\n            e.stopPropagation();\n            e.preventDefault();\n            nonblock_pass(notice, e, \"onmousedown\");\n          }\n        },\n        \"mouseup\": function(e){\n          if (that.options.nonblock) {\n            e.stopPropagation();\n            e.preventDefault();\n            nonblock_pass(notice, e, \"onmouseup\");\n          }\n        },\n        \"click\": function(e){\n          if (that.options.nonblock) {\n            e.stopPropagation();\n            nonblock_pass(notice, e, \"onclick\");\n          }\n        },\n        \"dblclick\": function(e){\n          if (that.options.nonblock) {\n            e.stopPropagation();\n            nonblock_pass(notice, e, \"ondblclick\");\n          }\n        }\n      });\n    }\n  };\n  return PNotify;\n}));\n"]}