{"version":3,"sources":["pnotify.mobile.js"],"names":["root","factory","define","amd","exports","module","require","jQuery","PNotify","window","$","prototype","options","mobile","swipe_dismiss","styling","modules","init","notice","that","origX","diffX","noticeWidth","doMobileStyling","elem","on","e","originalEvent","touches","screenX","width","container","css","curX","opacity","Math","abs","goLeft","animate","remove","update","addClass","stack","mobileOrigSpacing1","spacing1","mobileOrigSpacing2","spacing2","removeClass"],"mappings":"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","file":"src/pnotify.mobile.js","sourceRoot":"../","sourcesContent":["// Mobile\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as a module.\n    define('pnotify.mobile', ['jquery', 'pnotify'], factory);\n  } else if (typeof exports === 'object' && typeof module !== 'undefined') {\n    // CommonJS\n    module.exports = factory(require('jquery'), require('./pnotify'));\n  } else {\n    // Browser globals\n    factory(root.jQuery, root.PNotify);\n  }\n}(typeof window !== \"undefined\" ? window : this, function($, PNotify){\n  PNotify.prototype.options.mobile = {\n    // Let the user swipe the notice away.\n    swipe_dismiss: true,\n    // Styles the notice to look good on mobile.\n    styling: true\n  };\n  PNotify.prototype.modules.mobile = {\n    init: function(notice, options){\n      var that = this,\n          origX = null,\n          diffX = null,\n          noticeWidth = null;\n\n      this.swipe_dismiss = options.swipe_dismiss;\n      this.doMobileStyling(notice, options);\n\n      notice.elem.on({\n        \"touchstart\": function(e){\n          if (!that.swipe_dismiss) {\n            return;\n          }\n\n          origX = e.originalEvent.touches[0].screenX;\n          noticeWidth = notice.elem.width();\n          notice.container.css(\"left\", \"0\");\n        },\n        \"touchmove\": function(e){\n          if (!origX || !that.swipe_dismiss) {\n            return;\n          }\n\n          var curX = e.originalEvent.touches[0].screenX;\n\n          diffX = curX - origX;\n          var opacity = (1 - (Math.abs(diffX) / noticeWidth)) * notice.options.opacity;\n\n          notice.elem.css(\"opacity\", opacity);\n          notice.container.css(\"left\", diffX);\n        },\n        \"touchend\": function() {\n          if (!origX || !that.swipe_dismiss) {\n            return;\n          }\n\n          if (Math.abs(diffX) > 40) {\n            var goLeft = (diffX < 0) ? noticeWidth * -2 : noticeWidth * 2;\n            notice.elem.animate({\"opacity\": 0}, 100);\n            notice.container.animate({\"left\": goLeft}, 100);\n            notice.remove();\n          } else {\n            notice.elem.animate({\"opacity\": notice.options.opacity}, 100);\n            notice.container.animate({\"left\": 0}, 100);\n          }\n          origX = null;\n          diffX = null;\n          noticeWidth = null;\n        },\n        \"touchcancel\": function(){\n          if (!origX || !that.swipe_dismiss) {\n            return;\n          }\n\n          notice.elem.animate({\"opacity\": notice.options.opacity}, 100);\n          notice.container.animate({\"left\": 0}, 100);\n          origX = null;\n          diffX = null;\n          noticeWidth = null;\n        }\n      });\n    },\n    update: function(notice, options){\n      this.swipe_dismiss = options.swipe_dismiss;\n      this.doMobileStyling(notice, options);\n    },\n    doMobileStyling: function(notice, options){\n      if (options.styling) {\n        notice.elem.addClass(\"ui-pnotify-mobile-able\");\n\n        if ($(window).width() <= 480) {\n          if (!notice.options.stack.mobileOrigSpacing1) {\n            notice.options.stack.mobileOrigSpacing1 = notice.options.stack.spacing1;\n            notice.options.stack.mobileOrigSpacing2 = notice.options.stack.spacing2;\n          }\n          notice.options.stack.spacing1 = 0;\n          notice.options.stack.spacing2 = 0;\n        } else if (notice.options.stack.mobileOrigSpacing1 || notice.options.stack.mobileOrigSpacing2) {\n          notice.options.stack.spacing1 = notice.options.stack.mobileOrigSpacing1;\n          delete notice.options.stack.mobileOrigSpacing1;\n          notice.options.stack.spacing2 = notice.options.stack.mobileOrigSpacing2;\n          delete notice.options.stack.mobileOrigSpacing2;\n        }\n      } else {\n        notice.elem.removeClass(\"ui-pnotify-mobile-able\");\n\n        if (notice.options.stack.mobileOrigSpacing1) {\n          notice.options.stack.spacing1 = notice.options.stack.mobileOrigSpacing1;\n          delete notice.options.stack.mobileOrigSpacing1;\n        }\n        if (notice.options.stack.mobileOrigSpacing2) {\n          notice.options.stack.spacing2 = notice.options.stack.mobileOrigSpacing2;\n          delete notice.options.stack.mobileOrigSpacing2;\n        }\n      }\n    }\n  };\n  return PNotify;\n}));\n"]}